
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Combinators &#8212; OpenDP</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=f91d6a3704ddd3a9dc0f" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=f91d6a3704ddd3a9dc0f" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=f91d6a3704ddd3a9dc0f" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=f91d6a3704ddd3a9dc0f" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=4f92a2c4" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=f91d6a3704ddd3a9dc0f" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=f91d6a3704ddd3a9dc0f" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=f91d6a3704ddd3a9dc0f"></script>

    <script src="../_static/documentation_options.js?v=6c04cfde"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/combinators';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Compositors" href="combinators/compositors.html" />
    <link rel="prev" title="Differentially Private PCA" href="measurements/pca.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Oct 11, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/opendp-logo.png" class="logo__image only-light" alt="OpenDP - Home"/>
    <script>document.write(`<img src="../_static/opendp-logo.png" class="logo__image only-dark" alt="OpenDP - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../quickstart.html">
                        Quickstart
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../examples/index.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../contributor/index.html">
                        Contributor Guide
                      </a>
                    </li>
                
            <li class="nav-item dropdown pst-header-nav-item">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item  ">
                      <a class="nav-link dropdown-item nav-internal" href="../resources/index.html">
                        Resources
                      </a>
                    </li>
                

                    <li class="nav-item  ">
                      <a class="nav-link dropdown-item nav-internal" href="../opendp-commons/index.html">
                        OpenDP Commons
                      </a>
                    </li>
                

                    <li class="nav-item  ">
                      <a class="nav-link dropdown-item nav-internal" href="../contact.html">
                        Contact
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/opendp" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../quickstart.html">
                        Quickstart
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../examples/index.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item pst-header-nav-item ">
                      <a class="nav-link nav-internal" href="../contributor/index.html">
                        Contributor Guide
                      </a>
                    </li>
                
            <li class="nav-item dropdown pst-header-nav-item">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item  ">
                      <a class="nav-link dropdown-item nav-internal" href="../resources/index.html">
                        Resources
                      </a>
                    </li>
                

                    <li class="nav-item  ">
                      <a class="nav-link dropdown-item nav-internal" href="../opendp-commons/index.html">
                        OpenDP Commons
                      </a>
                    </li>
                

                    <li class="nav-item  ">
                      <a class="nav-link dropdown-item nav-internal" href="../contact.html">
                        Contact
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/opendp" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="limitations.html">Limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="first-look-at-DP.html">First Look at DP</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="programming-framework/index.html">Programming Framework</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="programming-framework/core-structures.html">Core Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="programming-framework/supporting-elements.html">Supporting Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="programming-framework/a-framework-to-understand-dp.html">A Framework to Understand DP</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="transformations.html">Transformations</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="transformations/aggregation-sum.html">Aggregation: Sum</a></li>
<li class="toctree-l2"><a class="reference internal" href="transformations/aggregation-mean.html">Aggregation: Mean</a></li>
<li class="toctree-l2"><a class="reference internal" href="transformations/aggregation-quantile.html">Aggregation: Quantile</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="measurements.html">Measurements</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="measurements/additive-noise-mechanisms.html">Additive Noise Mechanisms</a></li>
<li class="toctree-l2"><a class="reference internal" href="measurements/randomized-response.html">Randomized Response</a></li>
<li class="toctree-l2"><a class="reference internal" href="measurements/pca.html">Differentially Private PCA</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">Combinators</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="combinators/compositors.html">Compositors</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="utilities/index.html">Utilities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="utilities/typing.html">Typing</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="utilities/accuracy/index.html">Accuracy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="utilities/accuracy/accuracy-pitfalls.html">Accuracy: Pitfalls and Edge Cases</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="utilities/parameter-search.html">Parameter Search</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="putting-it-together.html">Putting It Together</a></li>
</ul>
</div>
</nav></div>
        <div class="sidebar-primary-item">
<h6>Branches</h6>
<ul>
    <li><a href="../../beta/index.html" style="font-weight: normal">beta</a></li>
    <li><a href="../../nightly/index.html" style="font-weight: normal">nightly</a></li>
    <li><a href="../../stable/index.html" style="font-weight: normal">stable</a></li>
</ul>


<h6 id="releases_header">Releases
    <div id="releases_symbol" style="float:right"></div>
</h6>
<ul id="releases_content">
    <li><a href="../../v0.14.1/index.html" style="font-weight: normal">v0.14.1</a></li>
    <li><a href="../../v0.14.0/index.html" style="font-weight: normal">v0.14.0</a></li>
    <li><a href="../../v0.13.0/index.html" style="font-weight: normal">v0.13.0</a></li>
    <li><a href="../../v0.12.1/index.html" style="font-weight: normal">v0.12.1</a></li>
    <li><a href="../../v0.12.0/index.html" style="font-weight: normal">v0.12.0</a></li>
    <li><a href="../../v0.11.1/index.html" style="font-weight: normal">v0.11.1</a></li>
    <li><a href="../../v0.11.0/index.html" style="font-weight: normal">v0.11.0</a></li>
    <li><a href="../../v0.10.0/index.html" style="font-weight: normal">v0.10.0</a></li>
    <li><a href="../../v0.9.2/user/combinators.html" style="font-weight: normal">v0.9.2</a></li>
    <li><a href="../../v0.9.1/user/combinators.html" style="font-weight: normal">v0.9.1</a></li>
    <li><a href="combinators.html" style="font-weight: bold">v0.9.0</a></li>
    <li><a href="../../v0.8.0/user/combinators.html" style="font-weight: normal">v0.8.0</a></li>
    <li><a href="../../v0.7.0/user/combinators.html" style="font-weight: normal">v0.7.0</a></li>
    <li><a href="../../v0.6.2/user/combinators.html" style="font-weight: normal">v0.6.2</a></li>
    <li><a href="../../v0.6.1/index.html" style="font-weight: normal">v0.6.1</a></li>
    <li><a href="../../v0.6.0/index.html" style="font-weight: normal">v0.6.0</a></li>
    <li><a href="../../v0.5.0/index.html" style="font-weight: normal">v0.5.0</a></li>
    <li><a href="../../v0.4.0/index.html" style="font-weight: normal">v0.4.0</a></li>
    <li><a href="../../v0.3.0/index.html" style="font-weight: normal">v0.3.0</a></li>
    <li><a href="../../v0.2.4/index.html" style="font-weight: normal">v0.2.4</a></li>
    <li><a href="../../v0.2.3/index.html" style="font-weight: normal">v0.2.3</a></li>
    <li><a href="../../v0.2.2/index.html" style="font-weight: normal">v0.2.2</a></li>
    <li><a href="../../v0.2.1/index.html" style="font-weight: normal">v0.2.1</a></li>
    <li><a href="../../v0.2.0/index.html" style="font-weight: normal">v0.2.0</a></li>
    <li><a href="../../v0.1.0/index.html" style="font-weight: normal">v0.1.0</a></li>
</ul>
<script>
    let expanded = !!JSON.parse(localStorage.getItem('expanded'));

    let releasesHeader = document.getElementById("releases_header");
    let releasesSymbol = document.getElementById("releases_symbol");
    let releasesContent = document.getElementById("releases_content");

    function setReleasesState() {
        localStorage.setItem("expanded", JSON.stringify(expanded))
        releasesContent.style.display = expanded ? "block" : "none";
        releasesSymbol.classList.add(expanded ? 'minus' : 'plus')
        releasesSymbol.classList.remove(expanded ? 'plus' : 'minus')
    }

    setReleasesState()
    releasesHeader.addEventListener("click", function() {
        expanded = !expanded;
        setReleasesState()
    })
</script>
<style>
    .plus {
        position: relative;
        width:20px;
        height:20px;
        background:#676767;
    }

    .plus:before,
    .plus:after {
        content: "";
        position:absolute;
        background:#fff;
    }

    .plus:before {
        left:50%;
        top:4px;
        bottom:4px;
        width:3px;
        transform:translateX(-50%);
    }

    .plus:after {
        top:50%;
        left:4px;
        right:4px;
        height:3px;
        transform:translateY(-50%);
    }



    .minus {
        position: relative;
        width:20px;
        height:20px;
        background:#676767;
    }

    .minus:before,
    .minus:after {
        content: "";
        position:absolute;
        background:#fff;
    }

    .minus:after {
        top:50%;
        left:4px;
        right:4px;
        height:3px;
        transform:translateY(-50%);
    }
</style>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Combinators</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item"><div class="admonition warning" style="position: relative;">
    <!--
     Without the style, the region for the article title overlaps, and the link is unclickable.
    -->
    <details>
        <summary>Questions or feedback?</summary>
        <!--
            All of these lists should be in sync:
            - README.md
            - docs/source/contributing/contact.rst
            - docs/source/_templates/questions-feedback.html
            - .github/ISSUE_TEMPLATE/config.yml
        -->
        <ul>
            <li>Report a bug or request a feature on <a href="https://github.com/opendp/opendp/issues">Github</a>.</li>
            <li>Send general queries to <a href="mailto:info@opendp.org">info@opendp.org</a>, or email <a href="mailto:security@opendp.org">security@opendp.org</a> if it is related to security.</li>
            <li>Join the conversation on <a href="https://join.slack.com/t/opendp/shared_invite/zt-zw7o1k2s-dHg8NQE8WTfAGFnN_cwomA">Slack</a>, or the <a href="https://groups.google.com/a/g.harvard.edu/g/opendp-community">mailing list</a>.</li>
        </ul>
    </details>
</div></div>
      
        <div class="header-article-item">
<div class="admonition warning" style="position: relative;" id="old-version-warning">
  <!--
   To work with this locally, in conf.py uncomment the entry under "html_context".

   Without the style, the region for the article title overlaps, and the link is unclickable.
  -->
  <p class="admonition-title">
  
  This documentation is for an old version of OpenDP.
  
  </p>
  <p>The current release of OpenDP is <a href="/">v0.14.1</a>.</p>
</div>
<script>
  window.addEventListener("load", (event) => {
    document.getElementById('old-version-warning').style.top = `${window.visualViewport.pageTop}px`;
  });
</script>
</div>
      
    </div>
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="combinators">
<span id="combinator-constructors"></span><h1>Combinators<a class="headerlink" href="#combinators" title="Link to this heading">#</a></h1>
<p>Combinator constructors use Transformations or Measurements to produce a new Transformation or Measurement.</p>
<section id="chaining">
<span id="id1"></span><h2>Chaining<a class="headerlink" href="#chaining" title="Link to this heading">#</a></h2>
<p>Two of the most essential constructors are the “chainers” that chain transformations with transformations, and transformations with measurements.
Chainers are used to incrementally piece Transformations or Measurements together that represent longer computational pipelines.</p>
<p>The <a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_chain_tt" title="opendp.combinators.make_chain_tt"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_chain_tt()</span></code></a> constructor creates a new Transformation by stitching together two Transformations sequentially.
The resulting Transformation contains a function that sequentially executes the function of the constituent Transformations.
It also contains a privacy map that takes an input distance bound on the inner Transformation and emits an output distance bound on the outer transformation.</p>
<p>The <a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_chain_mt" title="opendp.combinators.make_chain_mt"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_chain_mt()</span></code></a> constructor similarly creates a new Measurement by combining an inner Transformation with an outer Measurement.
Notice that <cite>there is no</cite> <code class="docutils literal notranslate"><span class="pre">make_chain_mm</span></code> for chaining measurements together!
Any computation beyond a measurement is postprocessing and need not be governed by relations.</p>
<p>Postprocessing functionality is provided by the <a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_chain_pm" title="opendp.combinators.make_chain_pm"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_chain_pm()</span></code></a> constructor that allows transformations to be chained onto a Measurement.
Since the outer Transformation is postprocessing, the metrics and stability map of the outer Transformation are ignored.
In this case, it is only necessary for the types to conform.</p>
<p>In the following example we chain <a class="reference internal" href="../api/python/opendp.measurements.html#opendp.measurements.make_base_discrete_laplace" title="opendp.measurements.make_base_discrete_laplace"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.measurements.make_base_discrete_laplace()</span></code></a> with <a class="reference internal" href="../api/python/opendp.transformations.html#opendp.transformations.make_sum" title="opendp.transformations.make_sum"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.transformations.make_sum()</span></code></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">opendp.prelude</span> <span class="k">as</span> <span class="nn">dp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dp</span><span class="o">.</span><span class="n">enable_features</span><span class="p">(</span><span class="s2">&quot;contrib&quot;</span><span class="p">,</span> <span class="s2">&quot;floating-point&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># call a constructor to produce a transformation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_trans</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">make_sum</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">dp</span><span class="o">.</span><span class="n">vector_domain</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">atom_domain</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))),</span>
<span class="gp">... </span>    <span class="n">dp</span><span class="o">.</span><span class="n">symmetric_distance</span><span class="p">()</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># call a constructor to produce a measurement</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lap_meas</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">make_laplace</span><span class="p">(</span><span class="n">sum_trans</span><span class="o">.</span><span class="n">output_domain</span><span class="p">,</span> <span class="n">sum_trans</span><span class="o">.</span><span class="n">output_metric</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_sum</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">make_chain_mt</span><span class="p">(</span><span class="n">lap_meas</span><span class="p">,</span> <span class="n">sum_trans</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># investigate the privacy relation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">symmetric_distance</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">epsilon</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">noisy_sum</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">d_in</span><span class="o">=</span><span class="n">symmetric_distance</span><span class="p">,</span> <span class="n">d_out</span><span class="o">=</span><span class="n">epsilon</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># invoke the chained measurement&#39;s function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">release</span> <span class="o">=</span> <span class="n">noisy_sum</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
<p>In practice, these chainers are used so frequently that we’ve written a shorthand (<code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>).
The syntax automatically chooses between <a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_chain_mt" title="opendp.combinators.make_chain_mt"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_chain_mt</span></code></a>,
<a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_chain_tt" title="opendp.combinators.make_chain_tt"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_chain_tt</span></code></a>,
and <a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_chain_pm" title="opendp.combinators.make_chain_pm"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_chain_pm</span></code></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">noisy_sum_meas</span> <span class="o">=</span> <span class="n">sum_trans</span> <span class="o">&gt;&gt;</span> <span class="n">lap_meas</span>
</pre></div>
</div>
<p id="chaining-mismatch">In this example the chaining was successful because:</p>
<ul class="simple">
<li><p>bounded_sum’s output domain is equivalent to base_dl’s input domain</p></li>
<li><p>bounded_sum’s output metric is equivalent to base_dl’s input metric</p></li>
</ul>
<p>Chaining fails if we were to adjust the domains such that they won’t match.
In the below example, the adjustment is subtle, but the bounds were adjusted to floats.
<code class="docutils literal notranslate"><span class="pre">make_sum</span></code> is equally capable of summing floats,
but the chaining fails because the sum emits floats and the discrete Laplace mechanism expects integers.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.mod</span> <span class="kn">import</span> <span class="n">OpenDPException</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># call a constructor to produce a transformation, but this time with float bounds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_trans</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">make_sum</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">dp</span><span class="o">.</span><span class="n">vector_domain</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">atom_domain</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">))),</span>
<span class="gp">... </span>    <span class="n">dp</span><span class="o">.</span><span class="n">symmetric_distance</span><span class="p">()</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_trans</span> <span class="o">&gt;&gt;</span> <span class="n">lap_meas</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">opendp.mod.OpenDPException</span><span class="w">:</span>
<span class="x">  DomainMismatch(&quot;Intermediate domains don&#39;t match. See https://github.com/opendp/opendp/discussions/297</span>
<span class="x">    output_domain: AtomDomain(T=f64)</span>
<span class="x">    input_domain:  AtomDomain(T=i32)</span>
<span class="x">&quot;)</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">noisy_sum_trans</span></code>’s input domain and input metric come from <code class="docutils literal notranslate"><span class="pre">sum_trans</span></code>’s input domain and input metric.
This is intended to enable further chaining with preprocessors like <a class="reference internal" href="../api/python/opendp.transformations.html#opendp.transformations.make_cast" title="opendp.transformations.make_cast"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_cast</span></code></a>, <a class="reference internal" href="../api/python/opendp.transformations.html#opendp.transformations.make_impute_constant" title="opendp.transformations.make_impute_constant"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_impute_constant</span></code></a>, <a class="reference internal" href="../api/python/opendp.transformations.html#opendp.transformations.make_clamp" title="opendp.transformations.make_clamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_clamp</span></code></a> and <a class="reference internal" href="../api/python/opendp.transformations.html#opendp.transformations.make_resize" title="opendp.transformations.make_resize"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_resize</span></code></a>.
See the section on <a class="reference internal" href="transformations.html#transformation-constructors"><span class="std std-ref">Transformations</span></a> for more information on how to preprocess data in OpenDP.</p>
</section>
<section id="composition">
<h2>Composition<a class="headerlink" href="#composition" title="Link to this heading">#</a></h2>
<p>OpenDP has several compositors for making multiple releases on the same dataset:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_basic_composition" title="opendp.combinators.make_basic_composition"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_basic_composition</span></code></a></p></td>
<td><p>Non-interactive</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_sequential_composition" title="opendp.combinators.make_sequential_composition"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_sequential_composition</span></code></a></p></td>
<td><p>Interactive</p></td>
</tr>
</tbody>
</table>
<p>Composition combinators can compose Measurements with <code class="docutils literal notranslate"><span class="pre">ZeroConcentratedDivergence</span></code>, <code class="docutils literal notranslate"><span class="pre">MaxDivergence</span></code> and <code class="docutils literal notranslate"><span class="pre">FixedSmoothedMaxDivergence</span></code> output measures,
and arbitrary input metrics and domains.</p>
<p>See the notebook for code examples and more thorough explanations:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="combinators/compositors.html">Compositors</a></li>
</ul>
</div>
</section>
<section id="measure-casting">
<span id="id2"></span><h2>Measure Casting<a class="headerlink" href="#measure-casting" title="Link to this heading">#</a></h2>
<p>These combinators are used to cast the output measure of a Measurement.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Input Measure</p></th>
<th class="head"><p>Output Measure</p></th>
<th class="head"><p>Constructor</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MaxDivergence&lt;Q&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FixedSmoothedMaxDivergence&lt;Q&gt;</span></code></p></td>
<td><p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_pureDP_to_fixed_approxDP" title="opendp.combinators.make_pureDP_to_fixed_approxDP"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_pureDP_to_fixed_approxDP()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MaxDivergence&lt;Q&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ZeroConcentratedDivergence&lt;Q&gt;</span></code></p></td>
<td><p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_pureDP_to_zCDP" title="opendp.combinators.make_pureDP_to_zCDP"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_pureDP_to_zCDP()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ZeroConcentratedDivergence&lt;Q&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SmoothedMaxDivergence&lt;Q&gt;</span></code></p></td>
<td><p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_zCDP_to_approxDP" title="opendp.combinators.make_zCDP_to_approxDP"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_zCDP_to_approxDP()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SmoothedMaxDivergence&lt;Q&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FixedSmoothedMaxDivergence&lt;Q&gt;</span></code></p></td>
<td><p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_fix_delta" title="opendp.combinators.make_fix_delta"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_fix_delta()</span></code></a></p></td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_pureDP_to_fixed_approxDP" title="opendp.combinators.make_pureDP_to_fixed_approxDP"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_pureDP_to_fixed_approxDP()</span></code></a> is used for casting an output measure from <code class="docutils literal notranslate"><span class="pre">MaxDivergence</span></code> to <code class="docutils literal notranslate"><span class="pre">FixedSmoothedMaxDivergence</span></code>.
This is useful if you want to compose pure-DP measurements with approximate-DP measurements.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.measurements</span> <span class="kn">import</span> <span class="n">then_base_laplace</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.combinators</span> <span class="kn">import</span> <span class="n">make_pureDP_to_fixed_approxDP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.domains</span> <span class="kn">import</span> <span class="n">atom_domain</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.metrics</span> <span class="kn">import</span> <span class="n">absolute_distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_space</span> <span class="o">=</span> <span class="n">atom_domain</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span> <span class="n">absolute_distance</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_pureDP</span> <span class="o">=</span> <span class="n">input_space</span> <span class="o">&gt;&gt;</span> <span class="n">then_base_laplace</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">10.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the output measure to `FixedSmoothedMaxDivergence`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_fixed_approxDP</span> <span class="o">=</span> <span class="n">make_pureDP_to_fixed_approxDP</span><span class="p">(</span><span class="n">meas_pureDP</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># FixedSmoothedMaxDivergence distances are (ε, δ) tuples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_fixed_approxDP</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">d_in</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
<span class="go">(0.1, 0.0)</span>
</pre></div>
</div>
<p>Similarly, <a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_pureDP_to_zCDP" title="opendp.combinators.make_pureDP_to_zCDP"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_pureDP_to_zCDP()</span></code></a> is used for casting an output measure from <code class="docutils literal notranslate"><span class="pre">MaxDivergence</span></code> to <code class="docutils literal notranslate"><span class="pre">ZeroConcentratedDivergence</span></code>.</p>
<p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_zCDP_to_approxDP" title="opendp.combinators.make_zCDP_to_approxDP"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_zCDP_to_approxDP()</span></code></a> is used for casting an output measure from <code class="docutils literal notranslate"><span class="pre">ZeroConcentratedDivergence</span></code> to <code class="docutils literal notranslate"><span class="pre">SmoothedMaxDivergence</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.measurements</span> <span class="kn">import</span> <span class="n">then_base_gaussian</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.combinators</span> <span class="kn">import</span> <span class="n">make_zCDP_to_approxDP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_zCDP</span> <span class="o">=</span> <span class="n">input_space</span> <span class="o">&gt;&gt;</span> <span class="n">then_base_gaussian</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the output measure to `SmoothedMaxDivergence`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_approxDP</span> <span class="o">=</span> <span class="n">make_zCDP_to_approxDP</span><span class="p">(</span><span class="n">meas_zCDP</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># SmoothedMaxDivergence distances are ε(δ) curves</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curve</span> <span class="o">=</span> <span class="n">meas_approxDP</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">d_in</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curve</span><span class="o">.</span><span class="n">epsilon</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>
<span class="go">11.688596249354896</span>
</pre></div>
</div>
<p><a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_fix_delta" title="opendp.combinators.make_fix_delta"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_fix_delta()</span></code></a> changes the output measure from <code class="docutils literal notranslate"><span class="pre">SmoothedMaxDivergence</span></code> to <code class="docutils literal notranslate"><span class="pre">FixedSmoothedMaxDivergence</span></code>.
It fixes the delta parameter in the curve, so that the resulting measurement can be composed with other <code class="docutils literal notranslate"><span class="pre">FixedSmoothedMaxDivergence</span></code> measurements.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.combinators</span> <span class="kn">import</span> <span class="n">make_fix_delta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># convert the output measure to `FixedSmoothedMaxDivergence`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_fixed_approxDP</span> <span class="o">=</span> <span class="n">make_fix_delta</span><span class="p">(</span><span class="n">meas_approxDP</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># FixedSmoothedMaxDivergence distances are (ε, δ) tuples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas_fixed_approxDP</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">d_in</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
<span class="go">(13.3861046488579, 1e-08)</span>
</pre></div>
</div>
<p>These last two combinators allow you to convert output distances in terms of ρ-zCDP to ε(δ)-approxDP, and then to (ε, δ)-approxDP.</p>
</section>
<section id="amplification">
<h2>Amplification<a class="headerlink" href="#amplification" title="Link to this heading">#</a></h2>
<p>If your dataset is a simple sample from a larger population,
you can make the privacy relation more permissive by wrapping your measurement with a privacy amplification combinator:
<a class="reference internal" href="../api/python/opendp.combinators.html#opendp.combinators.make_population_amplification" title="opendp.combinators.make_population_amplification"><code class="xref py py-func docutils literal notranslate"><span class="pre">opendp.combinators.make_population_amplification()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The amplifier requires a looser trust model, as the population size can be set arbitrarily.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.mod</span> <span class="kn">import</span> <span class="n">enable_features</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enable_features</span><span class="p">(</span><span class="s2">&quot;honest-but-curious&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In order to demonstrate this API, we’ll first create a measurement with a sized input domain.
The resulting measurement expects the size of the input dataset to be 10.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_space</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">vector_domain</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">atom_domain</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">)),</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span> <span class="n">dp</span><span class="o">.</span><span class="n">symmetric_distance</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meas</span> <span class="o">=</span> <span class="n">input_space</span> <span class="o">&gt;&gt;</span> <span class="n">dp</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">then_mean</span><span class="p">()</span> <span class="o">&gt;&gt;</span> <span class="n">dp</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">then_laplace</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;standard mean:&quot;</span><span class="p">,</span> <span class="n">meas</span><span class="p">([</span><span class="mf">1.</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># -&gt; 1.03 </span>
<span class="go">standard mean: ...</span>
</pre></div>
</div>
<p>We can now use the amplification combinator to construct an amplified measurement.
The function on the amplified measurement is identical to the standard measurement.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">opendp.combinators</span> <span class="kn">import</span> <span class="n">make_population_amplification</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amplified</span> <span class="o">=</span> <span class="n">make_population_amplification</span><span class="p">(</span><span class="n">meas</span><span class="p">,</span> <span class="n">population_size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;amplified mean:&quot;</span><span class="p">,</span> <span class="n">amplified</span><span class="p">([</span><span class="mf">1.</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># -&gt; .97 </span>
<span class="go">amplified mean: ...</span>
</pre></div>
</div>
<p>The privacy relation on the amplified measurement takes into account that the input dataset of size 10
is a simple sample of individuals from a theoretical larger dataset that captures the entire population, with 100 rows.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre data-tabindex="0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Where we once had a privacy utilization of ~2 epsilon...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">meas</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">2.</span> <span class="o">+</span> <span class="mf">1e-6</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ...we now have a privacy utilization of ~.4941 epsilon.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">amplified</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">.4941</span><span class="p">)</span>
</pre></div>
</div>
<p>The efficacy of this combinator improves as n gets larger.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="measurements/pca.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Differentially Private PCA</p>
      </div>
    </a>
    <a class="right-next"
       href="combinators/compositors.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Compositors</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chaining">Chaining</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#composition">Composition</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#measure-casting">Measure Casting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#amplification">Amplification</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/user/combinators.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=f91d6a3704ddd3a9dc0f"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=f91d6a3704ddd3a9dc0f"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3rc1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>